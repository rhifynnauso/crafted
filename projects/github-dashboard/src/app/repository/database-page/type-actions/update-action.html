<ng-container *ngIf="updateState | async as state">
  <button mat-button [disabled]="state !== 'can-update'" (click)="update()">
    <mat-icon class="update" *ngIf="state !== 'updated'"
              [class.updating]="state === 'updating'">
      refresh
    </mat-icon>

    <ng-container [ngSwitch]="state">
      <ng-container *ngSwitchCase="'can-update'"> Update </ng-container>
      <ng-container *ngSwitchCase="'updating'"> Updating </ng-container>
      <ng-container *ngSwitchCase="'updated'"> Updated </ng-container>
    </ng-container>
  </button>
</ng-container>
